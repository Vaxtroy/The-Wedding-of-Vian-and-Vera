const offcanvas=document.querySelector(".offcanvas"),hamburger=document.querySelector(".navbar-toggler"),stickyTop=document.querySelector(".sticky-top");hamburger.addEventListener("click",function(){stickyTop.style.overflow="visible"}),offcanvas.addEventListener("hidden.bs.offcanvas",function(){stickyTop.style.overflow="hidden"});const rootElement=document.querySelector(":root"),audioIconWrapper=document.querySelector(".audio-icon-wrapper"),audioIcon=document.querySelector(".audio-icon-wrapper i"),song=document.querySelector("#song");let isPlaying=!1;function disableScroll(){let e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(e,t)},rootElement.style.scrollBehavior="auto"}function enableScroll(){window.onscroll=function(){},rootElement.style.scrollBehavior="smooth",playAudio()}function playAudio(){song.volume=.1,audioIconWrapper.style.display="flex",song.play(),isPlaying=!0}function copyText(e){let t=e.parentElement.querySelector(".number").innerText,n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),n.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(n),$(e).html("Berhasil disalin!"),setTimeout(function(){$(e).html('<i class="fas fa-fw fa-copy"></i> Copy')},2e3)}audioIconWrapper.addEventListener("click",function(){isPlaying?(song.pause(),audioIcon.classList.remove("bi-disc"),audioIcon.classList.add("bi-pause-circle")):(song.play(),audioIcon.classList.add("bi-disc"),audioIcon.classList.remove("bi-pause-circle")),isPlaying=!isPlaying}),disableScroll(),window.addEventListener("load",function(){let e=document.getElementById("my-form");e&&e.addEventListener("submit",function(t){t.preventDefault();let n=document.getElementById("submit-btn");n.disabled=!0,n.textContent="Terima Kasih!";let o=new FormData(e),a=t.target.action;console.log("Data yang akan dikirim:",Array.from(o.entries())),fetch(a,{method:"POST",body:o}).then(e=>e.json()).then(e=>{console.log("Respon dari server:",e),alert("Konfirmasi kehadiran berhasil terkirim!")}).catch(e=>{console.error("Error:",e),alert("Terjadi kesalahan saat mengirim data. Silakan coba lagi."),n.disabled=!1,n.textContent="Kirim"})});let t=new URLSearchParams(window.location.search),n=t.get("n")||"",o=t.get("p")||"Bapak/Ibu/Saudara/i",a=document.querySelector(".hero h4 span");a&&(a.innerText=`${o} ${n},`.replace(/ ,$/,","));let i=document.querySelector("#nama");i&&(i.value=n);let l=document.getElementById("offcanvasNavbar"),r=document.querySelectorAll(".nav-link"),c=new bootstrap.Offcanvas(l);r.forEach(e=>{e.addEventListener("click",function(){c.hide()})}),AOS.init({once:!1})}),document.getElementById("my-form")?.addEventListener("submit",function(e){let t=document.getElementById("status");""===t.value&&(e.preventDefault(),alert("Konfirmasi wajib dipilih!"))}),$(document).ready(function(){$('a[href="#gift"]').on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("#gift").offset().top-200},100)})});
